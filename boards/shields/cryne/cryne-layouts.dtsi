#include <physical_layouts.dtsi>
#include <dt-bindings/zmk/matrix_transform.h>

/ {
    cryne_layout: cryne_layout {
        compatible = "zmk,physical-layout";
        display-name = "Cryne Default";
        
        transform = <&cryne_transform>;
        kscan = <&kscan0>;
        
        keys  //                 w   h    x    y     rot   rx   ry
            // Row 0 (top)
            = <&key_physical_attrs 100 100   19  (-102)  5    0    0>  // Q
            , <&key_physical_attrs 100 100  134  (-238) (-8)  0    0>  // W
            , <&key_physical_attrs 100 100  237  (-250) (-8)  0    0>  // E
            , <&key_physical_attrs 100 100  331  (-205) (-8)  0    0>  // R
            , <&key_physical_attrs 100 100  429  (-67)  (-8)  0    0>  // T
            , <&key_physical_attrs 100 100 1113  (-67)  (-8)  0    0>  // Y
            , <&key_physical_attrs 100 100 1211  (-205)  8    0    0>  // U
            , <&key_physical_attrs 100 100 1305  (-250)  8    0    0>  // I
            , <&key_physical_attrs 100 100 1408  (-238)  8    0    0>  // O
            , <&key_physical_attrs 100 100 1522  (-102)  8    0    0>  // P
            // Row 1 (home)
            , <&key_physical_attrs 100 100   10  (-2)    5    0    0>  // A
            , <&key_physical_attrs 100 100  118  (-111) (-8)  0    0>  // S
            , <&key_physical_attrs 100 100  222  (-149) (-8)  0    0>  // D
            , <&key_physical_attrs 100 100  318  (-106) (-8)  0    0>  // F
            , <&key_physical_attrs 100 100  415  (-37)  (-8)  0    0>  // G
            , <&key_physical_attrs 100 100 1127  (-37)   8    0    0>  // H
            , <&key_physical_attrs 100 100 1224  (-106)  8    0    0>  // J
            , <&key_physical_attrs 100 100 1320  (-149)  8    0    0>  // K
            , <&key_physical_attrs 100 100 1424  (-111)  8    0    0>  // L
            , <&key_physical_attrs 100 100 1532  (-2)    8    0    0>  // ;
            // Row 2 (bottom)
            , <&key_physical_attrs 100 100    1   97     5    0    0>  // Z
            , <&key_physical_attrs 100 100  103   16   (-8)   0    0>  // X
            , <&key_physical_attrs 100 100  208  (-48)  (-8)  0    0>  // C
            , <&key_physical_attrs 100 100  304  (-3)   (-8)  0    0>  // V
            , <&key_physical_attrs 100 100  401   (-7)  (-8)  0    0>  // B
            , <&key_physical_attrs 100 100 1141  (-7)    8    0    0>  // N
            , <&key_physical_attrs 100 100 1238  (-3)    8    0    0>  // M
            , <&key_physical_attrs 100 100 1334  (-48)   8    0    0>  // ,
            , <&key_physical_attrs 100 100 1439   16     8    0    0>  // .
            , <&key_physical_attrs 100 100 1541   97     8    0    0>  // /
            // Row 3 (thumbs)
            , <&key_physical_attrs 100 100  294  211     8    0    0>  // GUI
            , <&key_physical_attrs 100 100  389  191     8    0    0>  // LWR
            , <&key_physical_attrs 100 100  479  149     8    0    0>  // SPC
            , <&key_physical_attrs 100 100  491  250     8    0    0>  // BSPC
            , <&key_physical_attrs 100 100 1051  250   (-8)   0    0>  // ENT
            , <&key_physical_attrs 100 100 1063  149   (-8)   0    0>  // RSE
            , <&key_physical_attrs 100 100 1153  191   (-8)   0    0>  // ALT
            , <&key_physical_attrs 100 100 1248  211   (-8)   0    0>  // Ctrl
            ;
    };
    
    cryne_transform: cryne_transform {
        compatible = "zmk,matrix-transform";
        columns = <10>;
        rows = <4>;
        map = <
          //  Left side: Row 0 (5 keys)            //  Right side: Row 0 (5 keys)
          RC(0,0) RC(0,1) RC(0,2) RC(0,3) RC(0,4)  RC(0,5) RC(0,6) RC(0,7) RC(0,8) RC(0,9)
          //  Left side: Row 1 (5 keys)            //  Right side: Row 1 (5 keys)
          RC(1,0) RC(1,1) RC(1,2) RC(1,3) RC(1,4)  RC(1,5) RC(1,6) RC(1,7) RC(1,8) RC(1,9)
          //  Left side: Row 2 (5 keys)            //  Right side: Row 2 (5 keys)
          RC(2,0) RC(2,1) RC(2,2) RC(2,3) RC(2,4)  RC(2,5) RC(2,6) RC(2,7) RC(2,8) RC(2,9)
          //  Left side: Row 3 (4 keys)            //  Right side: Row 3 (4 keys)
          /*    */RC(3,1) RC(3,2) RC(3,3) RC(3,4)  RC(3,5) RC(3,6) RC(3,7) RC(3,8)
        >;
    };
};
